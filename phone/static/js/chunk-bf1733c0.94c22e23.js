(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bf1733c0"],{"79c7":function(e,t,a){},"8eca":function(e,t,a){"use strict";a("79c7")},cb0e:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dbhc"},[t("header",[e._v(" 特困自理能力评估 ")]),t("div",{staticClass:"searchBox"},[t("van-sticky",[t("van-dropdown-menu",{attrs:{"active-color":"#1989fa"}},[t("van-dropdown-item",{attrs:{options:e.option2},on:{change:e.changeEvent},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}}),t("van-dropdown-item",{attrs:{title:"搜索"}},[t("van-cell",[t("van-search",{attrs:{"show-action":"",placeholder:"请输入姓名/身份证号码"},on:{search:e.onSearch},scopedSlots:e._u([{key:"action",fn:function(){return[t("div",{on:{click:e.onSearch}},[e._v("搜索")])]},proxy:!0}]),model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),t("van-cell",[t("div",{staticStyle:{padding:"5px 16px"}},[t("van-uploader",{staticStyle:{width:"100%",display:"block"},attrs:{"before-read":e.beforeRead,"after-read":e.uploadImg("IDCard")}},[t("van-button",{staticStyle:{width:"100%",display:"block"},attrs:{size:"small",block:"",type:"info","native-type":"button"}},[e._v("拍照识别 ")])],1)],1)])],1)],1)],1)],1),t("main",[t("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[t("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.items,(function(a,s){return t("div",{key:s,staticClass:"hc",on:{click:function(t){return e.routerPush(a.ab_id,s)}}},[t("div",{staticClass:"hcHeader"},[t("div",{staticClass:"hcHeader1"},[t("div",{staticClass:"circle",style:{backgroundColor:a.bgcolor}}),t("div",{staticStyle:{color:"#333333","margin-left":"5px"}},[e._v(e._s(a.ab_ex3))])]),t("div",{staticStyle:{color:"#666666"}},[e._v("评估状态："+e._s(a.aer_ex10))])]),t("div",{staticClass:"hcHeader2"},[t("div",[e._v("身份证号："+e._s(a.abm_ex2))])]),t("div",{staticClass:"hcHeader3"},[t("div",[e._v("联系电话："+e._s(a.ab_ex28))])]),t("div",{staticClass:"hcHeader3"},[t("div",[e._v("供养机构："+e._s(a.ab_ex195?a.ab_ex195:"无"))])]),t("div",{staticClass:"hcHeader4"},[e._v("申请日期："+e._s(a.ab_dat14))])])})),0)],1)],1)])},i=[],o=a("b775"),l=a("fa7d"),n={name:"hc",props:["headername","jz"],data(){return{items:[],page:"1",ab_ex15:"",ab_ex96:"",ab_ex3:"",ab_ex13:"",bgcolor:"#bcbcbc",loading:!1,finished:!1,refreshing:!1,searchValue:"",searchName:"",searchIdCard:"",value1:"",value2:"评估状态",searchData:"",option1:[{text:"行政区划",value:0},{text:"新款商品",value:1},{text:"活动商品",value:2}],option2:[{text:"评估状态",value:"评估状态"},{text:"全部",value:"全部"},{text:"完成",value:"完成"},{text:"未完成",value:"未完成"}],fileList2:[],options:[]}},created(){Object(o["a"])({method:"post",url:"/social/assistanceWeixin/getCitys",data:{}}).then(e=>{console.log(e,"接口区划");for(let t in e){this.options.push({text:"",value:"",children:[]}),this.options[t].text=e[t].n.split("#")[0],this.options[t].value="#"+e[t].n.split("#")[1];for(let a in e[t].c){this.options[t].children[a]={text:"",value:"",children:[]},this.options[t].children[a].text=e[t].c[a].n.split("#")[0],this.options[t].children[a].value="#"+e[t].c[a].n.split("#")[1];for(let s in e[t].c[a].a)this.options[t].children[a].children[s]={text:"",value:""},this.options[t].children[a].children[s].text=e[t].c[a].a[s].split("#")[0],this.options[t].children[a].children[s].value="#"+e[t].c[a].a[s].split("#")[1]}}console.log(this.options,"区划")}).catch(e=>{console.log(e,"xzqh"),this.$toast.fail("数据请求失败1")})},watch:{},methods:{changeEvent(){console.log(this.value2),this.page=1,"评估状态"==this.value2||"全部"==this.value2?this.value1="":"未完成"==this.value2?this.value1="未完成":"完成"==this.value2&&(this.value1="完成"),this.onRefresh()},loadData(e){return Object(o["a"])({method:"post",url:"/social/assistanceWeixin/TkEvaluationReportList",data:e,headers:{token:sessionStorage.getItem("token")}})},onLoad(){this.refreshing&&(this.items=[],this.page="1"),this.loadData({page:this.page.toString(),sqlwhere:"",ab_ex3:this.searchName,ab_ex7:this.searchIdCard,aer_ex10:this.value1}).then(e=>{if(this.refreshing=!1,console.log(e,"res"),console.log(e[0],"res"),e.length>0)for(let t=0;t<e.length;t++){let a=parseInt(e[t].rownumber)-1;console.log(a),this.$set(this.items,a,{ab_ex15:unescape(e[t].ab_ex15),abm_ex2:unescape(e[t].abm_ex2).replace(/(\w{6})\w*(\w{2})/,"$1****$2"),ab_ex96:unescape(e[t].ab_ex96),ab_ex3:unescape(e[t].ab_ex3),ab_ex13:unescape(e[t].ab_ex13),ab_ex28:unescape(e[t].ab_ex28),ab_ex195:unescape(e[t].ab_ex195),ab_ex11:unescape(e[t].ab_ex11),aer_ex10:unescape(e[t].aer_ex10),ab_dat14:unescape(e[t].ab_dat14),ab_id:e[t].ab_id,aer_id:e[t].aer_id,bgcolor:"申请"!=unescape(e[t].ab_ex15)?"#bcbcbc":"#48b4fd"})}console.log(this.items,"列表数据"),this.loading=!1,console.log(this.items),this.page++,console.log(this.page),0==e.length&&(this.finished=!0)}).catch(e=>{console.log(e)})},onRefresh(){this.finished=!1,this.items=[],this.loading=!0,this.onLoad()},onSearch(){this.refreshing=!0,this.searchIdCard="",this.searchName="",""==Object(l["e"])(this.searchValue)?this.searchIdCard=this.searchValue:this.searchName=this.searchValue,this.onRefresh()},routerPush(e,t){console.log(e,t,"id"),console.log(this.items[t],"this.items[index].aer_id"),this.$router.push({path:"/SelfCareAssessmentTable?sId="+this.items[t].aer_id+"stype="+this.items[t].aer_ex10,query:{sId:this.items[t].aer_id,stype:this.items[t].aer_ex10}})},beforeRead(e){return"image/heic"!=e.type&&""!=e.type||(this.$toast.fail("照片格式不正确"),!1)},imgRequest(e,t,a,s){Object(o["a"])({method:"post",url:"/social/weixinMinios/fileUpload",data:e}).then(e=>{t.status="done",t.message="上传完成",console.log(e),-1!=a.indexOf("IDCard")&&Object(o["a"])({method:"post",url:"/social/assistanceWeixin/idOrc",data:{img:t.content}}).then(e=>{if(console.log(e,"res"),"ok"==e[0].status)try{let t=e[0].data.words_result;console.log(t),"IDCard"==a?(t["公民身份号码"].words=t["公民身份号码"].words.replace(/\s+/g,""),this.searchValue=t["公民身份号码"].words,this.onSearch()):this.$toast.fail("身份证对比信息不符,请上传正确的身份证1")}catch(t){console.log(t),this.fileList2.pop(),this.$toast.fail("身份证对比信息不符,请上传正确的身份证2")}else this.fileList2.pop(),this.$toast.fail("身份证对比信息不符,请上传正确的身份证3")}).catch(e=>{console.log(e)})}).catch(e=>{t.status="failed",t.message="上传失败",this.$toast.fail("上传失败"),console.log(e)})},uploadImg(e,t){return a=>{a.status="uploading",a.message="上传中...",console.log(a.file);new l["a"](a,e,this.imgRequest,t)}}}},c=n,r=(a("8eca"),a("2877")),h=Object(r["a"])(c,s,i,!1,null,"5a0d1ada",null);t["default"]=h.exports}}]);