(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d9c8ee50"],{"57cf":function(e,t,s){},a6e1:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"SelfCareAssessmentTable"},[t("header",[e._v(" 长期护理失能评估表 ")]),t("van-sticky",[t("div",{staticClass:"pg_result"},[t("span",{staticStyle:{margin:"10px"}},[e._v("所得分值："),t("span",{staticStyle:{color:"red"}},[e._v(e._s(this.form.aer_ex15))])]),t("span",{staticStyle:{margin:"10px"}},[e._v("评估等级："),t("span",{staticStyle:{color:"red"}},[e._v(e._s(this.form.aer_ex12))])])])]),t("main",[t("div",[t("div",{staticClass:"PGBTitle"},[e._v(" 评估事项 ")]),t("van-form",{ref:"rule1",on:{submit:e.save}},[t("van-field",{attrs:{name:"name",readonly:"",label:"评估对象：",value:e.form.aer_ex4}}),t("van-field",{attrs:{name:"question1",label:"1. 进食：",required:"",rules:[{required:!0,message:"请选择一个进食选项"}]},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-radio-group",{attrs:{direction:"horizontal"},on:{change:function(t){return e.getEvent(e.question.question1,"question1")}},model:{value:e.question.question1,callback:function(t){e.$set(e.question,"question1",t)},expression:"question.question1"}},[t("div",[t("van-radio",{staticClass:"marginstyle",attrs:{name:"0",shape:"square"}},[e._v("A.较大和完全依赖(0分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"5",shape:"square"}},[e._v("B.需部分帮助（夹菜、盛饭）(5分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"10",shape:"square"}},[e._v("C.全面自理(10分)")])],1)])]},proxy:!0}])}),t("van-field",{attrs:{name:"question2",label:"2. 洗澡：",required:"",rules:[{required:!0,message:"请选择一个洗澡选项"}]},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-radio-group",{attrs:{direction:"horizontal"},on:{change:function(t){return e.getEvent(e.question.question2,"question2")}},model:{value:e.question.question2,callback:function(t){e.$set(e.question,"question2",t)},expression:"question.question2"}},[t("div",[t("van-radio",{staticClass:"marginstyle",attrs:{name:"0",shape:"square"}},[e._v("A.依赖(0分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"5",shape:"square"}},[e._v("B.自理(5分)")])],1)])]},proxy:!0}])}),t("van-field",{attrs:{name:"question3",label:"3. 梳洗、修饰：",required:"",rules:[{required:!0,message:"请选择一个梳洗、修饰选项"}]},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-radio-group",{attrs:{direction:"horizontal"},on:{change:function(t){return e.getEvent(e.question.question3,"question3")}},model:{value:e.question.question3,callback:function(t){e.$set(e.question,"question3",t)},expression:"question.question3"}},[t("div",[t("van-radio",{staticClass:"marginstyle",attrs:{name:"0",shape:"square"}},[e._v("A.依赖(0分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"5",shape:"square"}},[e._v("B.自理（能独立完成洗脸、梳头、刷牙、剃须）(5分)")])],1)])]},proxy:!0}])}),t("van-field",{attrs:{name:"question4",label:"4. 穿衣：",required:"",rules:[{required:!0,message:"请选择一个穿衣选项"}]},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-radio-group",{attrs:{direction:"horizontal"},on:{change:function(t){return e.getEvent(e.question.question4,"question4")}},model:{value:e.question.question4,callback:function(t){e.$set(e.question,"question4",t)},expression:"question.question4"}},[t("div",[t("van-radio",{staticClass:"marginstyle",attrs:{name:"0",shape:"square"}},[e._v("A.依赖(0分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"5",shape:"square"}},[e._v("B.需一半帮助(5分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"10",shape:"square"}},[e._v("C.自理（系开钮扣、开关拉链和穿鞋）(10分)")])],1)])]},proxy:!0}])}),t("van-field",{attrs:{name:"question5",label:"5. 控制大便：",required:"",rules:[{required:!0,message:"请选择一个控制大便选项"}]},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-radio-group",{attrs:{direction:"horizontal"},on:{change:function(t){return e.getEvent(e.question.question5,"question5")}},model:{value:e.question.question5,callback:function(t){e.$set(e.question,"question5",t)},expression:"question.question5"}},[t("div",[t("van-radio",{staticClass:"marginstyle",attrs:{name:"0",shape:"square"}},[e._v("A.昏迷或失禁(0分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"5",shape:"square"}},[e._v("B.偶尔失禁（每周大于1次）(5分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"10",shape:"square"}},[e._v("C.能控制(10分)")])],1)])]},proxy:!0}])}),t("van-field",{attrs:{name:"question6",label:"6. 控制小便：",required:"",rules:[{required:!0,message:"请选择一个控制小便选项"}]},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-radio-group",{attrs:{direction:"horizontal"},on:{change:function(t){return e.getEvent(e.question.question6,"question6")}},model:{value:e.question.question6,callback:function(t){e.$set(e.question,"question6",t)},expression:"question.question6"}},[t("div",[t("van-radio",{staticClass:"marginstyle",attrs:{name:"0",shape:"square"}},[e._v("A.失禁或昏迷或需他人导尿(0分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"5",shape:"square"}},[e._v("B.偶尔失禁（1次/24小时；大于1次/周）(5分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"10",shape:"square"}},[e._v("C.能控制(10分)")])],1)])]},proxy:!0}])}),t("van-field",{attrs:{name:"question7",label:"7. 如厕：",required:"",rules:[{required:!0,message:"请选择一个如厕选项"}]},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-radio-group",{attrs:{direction:"horizontal"},on:{change:function(t){return e.getEvent(e.question.question7,"question7")}},model:{value:e.question.question7,callback:function(t){e.$set(e.question,"question7",t)},expression:"question.question7"}},[t("div",[t("van-radio",{staticClass:"marginstyle",attrs:{name:"0",shape:"square"}},[e._v("A.依赖(0分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"5",shape:"square"}},[e._v("B.需部分帮助(5分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"10",shape:"square"}},[e._v("C.自理(10分)")])],1)])]},proxy:!0}])}),t("van-field",{attrs:{name:"question8",label:"8. 床椅转移：",required:"",rules:[{required:!0,message:"转移请选择一个床椅选项"}]},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-radio-group",{attrs:{direction:"horizontal"},on:{change:function(t){return e.getEvent(e.question.question8,"question8")}},model:{value:e.question.question8,callback:function(t){e.$set(e.question,"question8",t)},expression:"question.question8"}},[t("div",[t("van-radio",{staticClass:"marginstyle",attrs:{name:"0",shape:"square"}},[e._v("A.完全依赖别人(0分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"5",shape:"square"}},[e._v("B.需大量帮助（2人），能坐(5分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"10",shape:"square"}},[e._v("C.需小量帮助（1人），或监护(10分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"15",shape:"square"}},[e._v(" D.自理(15分)")])],1)])]},proxy:!0}])}),t("van-field",{attrs:{name:"question9",label:"9. 行走：",required:"",rules:[{required:!0,message:"请选择一个行走选项"}]},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-radio-group",{attrs:{direction:"horizontal"},on:{change:function(t){return e.getEvent(e.question.question9,"question9")}},model:{value:e.question.question9,callback:function(t){e.$set(e.question,"question9",t)},expression:"question.question9"}},[t("div",[t("van-radio",{staticClass:"marginstyle",attrs:{name:"0",shape:"square"}},[e._v("A.不能走(0分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"5",shape:"square"}},[e._v("B.在轮椅上独立行动(5分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"10",shape:"square"}},[e._v("C.需1人帮助（体力或语言督导）(10分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"15",shape:"square"}},[e._v("D.独自步行（可用辅助器具）(15分)")])],1)])]},proxy:!0}])}),t("van-field",{attrs:{name:"question10",label:"10. 上下楼梯：",required:"",rules:[{required:!0,message:"请选择一个上下楼梯选项"}]},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-radio-group",{attrs:{direction:"horizontal"},on:{change:function(t){return e.getEvent(e.question.question10,"question10")}},model:{value:e.question.question10,callback:function(t){e.$set(e.question,"question10",t)},expression:"question.question10"}},[t("div",[t("van-radio",{staticClass:"marginstyle",attrs:{name:"0",shape:"square"}},[e._v("A.不能(0分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"5",shape:"square"}},[e._v("B.需帮助(5分)")]),t("van-radio",{staticClass:"marginstyle",attrs:{name:"10",shape:"square"}},[e._v("C.自理(10分)")])],1)])]},proxy:!0}])}),t("van-field",{attrs:{name:"aer_ex16",label:"是否有集中供养意愿",placeholder:"点击选择集中供养意愿","is-link":"",required:"",readonly:"",clickable:"",rules:[{required:!0,message:"点击选择集中供养意愿"}]},on:{click:function(t){e.showOption1=!0}},model:{value:e.form.aer_ex16,callback:function(t){e.$set(e.form,"aer_ex16",t)},expression:"form.aer_ex16"}}),t("van-popup",{attrs:{position:"bottom"},model:{value:e.showOption1,callback:function(t){e.showOption1=t},expression:"showOption1"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.option1},on:{confirm:function(t){return e.optionEvent(t,"集中意愿")},cancel:function(t){e.showOption1=!1}}})],1),t("van-field",{attrs:{required:"",readonly:"",clickable:"",name:"aer_ex17",value:e.form.aer_ex17,label:"是否有精神病史或者精神认知障碍","is-link":"",placeholder:"是否有精神病史或者精神认知障碍",rules:[{required:!0,message:"请选择是否有精神病史或者精神认知障碍"}]},on:{click:function(t){e.showOption2=!0}}}),t("van-popup",{attrs:{position:"bottom"},model:{value:e.showOption2,callback:function(t){e.showOption2=t},expression:"showOption2"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.option2},on:{confirm:function(t){return e.optionEvent(t,"认知障碍")},cancel:function(t){e.showOption2=!1}}})],1),t("van-field",{attrs:{readonly:"",required:"",name:"aer_ex32",label:"评估机构",placeholder:"请填写评估机构",rules:[{required:!0,message:"请填写评估机构"}]},model:{value:e.form.aer_ex32,callback:function(t){e.$set(e.form,"aer_ex32",t)},expression:"form.aer_ex32"}}),t("van-field",{attrs:{readonly:"",required:"",name:"aer_ex31",label:"评估人员",placeholder:"请填写评估人员",rules:[{required:!0,message:"请填写评估人员"}]},model:{value:e.form.aer_ex31,callback:function(t){e.$set(e.form,"aer_ex31",t)},expression:"form.aer_ex31"}}),t("van-field",{attrs:{value:e.form.aer_dat3,readonly:"",name:"aer_dat3",label:"评估时间"}})],1),t("div",{staticClass:"PGBTitle"},[e._v(" 图片资料 ")]),t("div",{staticClass:"page4Img"},[t("div",{staticClass:"page4Img2"},[t("div",{staticClass:"page4Img2Font"},[e._v("纸质评估照片:")]),t("div",{staticClass:"page4Img2Div"},[t("div",{staticStyle:{position:"relative",width:"91%",float:"left"}},[t("van-uploader",{attrs:{"before-read":e.beforeRead,"after-read":e.uploadImg(1),"before-delete":e.beforeDelete("aer_ex21")},model:{value:e.fileList1,callback:function(t){e.fileList1=t},expression:"fileList1"}})],1)])]),t("div",{staticClass:"page4Img2 page4Img22"},[t("div",{staticClass:"page4Img2Font"},[e._v("评估现场照片:")]),t("div",{staticClass:"page4Img2Div"},[t("div",{staticStyle:{position:"relative",width:"91%",float:"left"}},[t("van-uploader",{attrs:{"before-read":e.beforeRead,"after-read":e.uploadImg(2),"before-delete":e.beforeDelete("aer_ex22")},model:{value:e.fileList2,callback:function(t){e.fileList2=t},expression:"fileList2"}})],1)])])])],1),e.isShow?t("div",{staticStyle:{width:"100%",position:"fixed",bottom:"0px","text-align":"center",display:"flex","justify-content":"space-around"}},[t("van-button",{attrs:{block:"",type:"info"},on:{click:function(t){return e.goBack("提交")}}},[e._v("返回")])],1):t("div",{staticStyle:{width:"100%",position:"fixed",bottom:"0px","text-align":"center",display:"flex","justify-content":"space-around"}},[t("van-button",{attrs:{block:""},on:{click:function(t){return e.save("暂存")}}},[e._v("暂存")]),t("van-button",{attrs:{block:"",type:"info"},on:{click:function(t){return e.save("提交")}}},[e._v("提交")])],1)])],1)},a=[],o=s("fa7d"),n=s("b775"),r={data(){return{JsonData:{},question:{question1:"",question2:"",question3:"",question4:"",question5:"",question6:"",question7:"",question8:"",question9:"",question10:""},isShow:!1,option1:["是","否"],option2:["是","否"],showTime:!1,showOption1:!1,showOption2:!1,time1:new Date,form:{aer_dat3:"",aer_dat2:"",saveType:"",aer_ex1:"",aer_ex2:"",aer_ex4:"",aer_ex5:"",aer_ex6:"",aer_ex7:"",aer_ex8:"",aer_ex9:"",aer_ex10:"",aer_ex11:{},aer_ex12:"",aer_ex13:"",aer_ex14:"",aer_ex15:"",aer_ex16:"",aer_ex17:"",aer_ex21:"",aer_ex22:""},fileList1:[],fileList2:[],popshow:!1}},created(){this.loadData()},methods:{loadData(){console.log(this.$route.query.sId),this.evaluationReportQuestionView({aer_id:this.$route.query.sId}).then(e=>{this.form=e[0];for(let s in e[0].aer_ex11)this.question[s]=e[0].aer_ex11[s].toString();console.log(this.question,"this.question");let t=e[0];if(console.log(t.aer_ex22),"完成"==this.$route.query.stype&&(this.isShow=!0),t.aer_ex21){let e=t.aer_ex21.split(",");console.log(this.fileList1),e.forEach((e,t)=>{console.log(e,"value"),this.imageView(e).then(e=>{this.fileList1.push({url:e,isImage:!0})}).catch(e=>{console.log(e)})})}if(t.aer_ex22){let e=t.aer_ex22.split(",");console.log(this.fileList2),e.forEach((e,t)=>{console.log(e,"value"),this.imageView(e).then(e=>{this.fileList2.push({url:e,isImage:!0})}).catch(e=>{console.log(e)})})}console.log(this.fileList1,"fileList1"),console.log(this.fileList2,"fileList2"),console.log(e),console.log(this.form)}).catch(e=>{console.log(e)})},getEvent(e,t){console.log(e,t);let s=void 0==this.question.question1?0:Number(this.question.question1),i=void 0==this.question.question2?0:Number(this.question.question2),a=void 0==this.question.question3?0:Number(this.question.question3),o=void 0==this.question.question4?0:Number(this.question.question4),n=void 0==this.question.question5?0:Number(this.question.question5),r=void 0==this.question.question6?0:Number(this.question.question6),l=void 0==this.question.question7?0:Number(this.question.question7),u=void 0==this.question.question8?0:Number(this.question.question8),c=void 0==this.question.question9?0:Number(this.question.question9),d=void 0==this.question.question10?0:Number(this.question.question10);console.log(s,i,a,o,n,r,l,u,c,d);let m=0;m=s+i+a+o+n+r+l+u+c+d,console.log(m,"总分"),this.form.aer_ex15=m,this.form.aer_ex12=m>=0&&m<=40?"自理":m>=41&&m<=60?"半失能":m>=61&&m<=100?"失能":"分值异常"},imageView(e){return Object(n["a"])({method:"post",url:e,headers:{token:sessionStorage.getItem("token")},data:{}})},evaluationReportQuestionView(e){return Object(n["a"])({method:"post",url:"/social/assistanceWeixin/evaluationReportQuestionView",data:e,headers:{token:sessionStorage.getItem("token1")}})},optionEvent(e,t){"集中意愿"==t?(this.form.aer_ex16=e,this.showOption1=!1):"认知障碍"==t?(this.form.aer_ex17=e,this.showOption2=!1):"评估时间"==t&&this.onConfirm(e),console.log(this.form)},goBack(){window.history.back(-1)},onConfirm(e){let t=new Date;console.log(t),this.time1=t;let s=t.getFullYear()+"-",i=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",a=t.getDate()<10?"0"+t.getDate():t.getDate(),o=t.getHours()<10?"0"+t.getHours():t.getHours(),n=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),r=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();this.form.aer_dat3=s+i+a+" "+o+":"+n+":"+r,this.showTime=!1},beforeRead(e){return"image/heic"!=e.type&&""!=e.type||(this.$toast.fail("照片格式不正确"),!1)},imgRequest(e,t,s,i){console.log("formData",e),Object(n["a"])({method:"post",url:"/social/weixinMinios/fileUpload",data:e}).then(e=>{t.status="done",t.message="上传完成",console.log(e),1==s?this.form.aer_ex21?this.form.aer_ex21=this.form.aer_ex21.concat(",",e[0].filename):this.form.aer_ex21=this.form.aer_ex21.concat(e[0].filename):2==s&&(this.form.aer_ex22?this.form.aer_ex22=this.form.aer_ex22.concat(",",e[0].filename):this.form.aer_ex22=this.form.aer_ex22.concat(e[0].filename))}).catch(e=>{t.status="failed",t.message="上传失败",1==s?this.fileList1.pop():2==s&&this.fileList2.pop(),this.$toast.fail("上传失败"),console.log(e)})},uploadImg(e,t){return s=>{s.status="uploading",s.message="上传中...",console.log(s.file);new o["a"](s,e,this.imgRequest,t)}},beforeDelete(e){return(t,s)=>{let i=this.form[e].split(",");return i.splice(s.index,1),this.form[e]=i.join(","),console.log(this.form[e]),console.log(e),console.log(t),console.log(s),!0}},save(e){let t=[];for(let o in this.question)t.push(this.question[o]);console.log(t);var s=t.some(e=>""==e);let i=this.form.aer_ex21.split(",");if(i.length>0){let e=[];for(let t in i)2==i[t].split("=").length?e.push(i[t].split("=")[1]):e.push(i[t]);console.log(e,"imgString"),this.form.aer_ex21=e.join(",")}let a=this.form.aer_ex22.split(",");if(a.length>0){let e=[];for(let t in a)2==a[t].split("=").length?e.push(a[t].split("=")[1]):e.push(a[t]);console.log(e,"imgString"),this.form.aer_ex22=e.join(",")}if(console.log(this.form),console.log(s,"isAllQuestion"),console.log(this.form.aer_ex15,"this.form.aer_ex15"),console.log(this.form.aer_ex12,"this.form.aer_ex12"),this.form.aer_ex11=this.question,console.log(this.question),"暂存"==e);else if("提交"==e){if(s)return this.$toast.fail("请完善测评题目"),!1;if(""==this.form.aer_ex16)return this.$toast.fail("请选择是否有集中供养意愿"),!1;if(""==this.form.aer_ex17)return this.$toast.fail("请选择是否有精神病史或者精神认知障碍"),!1;this.popshow=!0}console.log(this.form,"this.form"),Object(n["a"])({method:"post",url:"/social/assistanceWeixin/saveTkEvaluationReportQuestion",data:{data:"["+JSON.stringify(this.form)+"]",abr_ex10:e}}).then(t=>{console.log(t),"+OK"==t[0].status?"提交"==e?this.$dialog.alert({message:"提交成功！"}).then(()=>{window.history.back(-1)}):this.$dialog.alert({message:"暂存成功！"}).then(()=>{window.history.back(-1)}):this.$dialog.alert({message:t[0].msg}).then(()=>{window.history.back(-1)})}).catch(t=>{"提交"==e?this.$toast.fail("提交失败"):this.$toast.fail("暂存失败")})}}},l=r,u=(s("c811"),s("2877")),c=Object(u["a"])(l,i,a,!1,null,"78fbb935",null);t["default"]=c.exports},c811:function(e,t,s){"use strict";s("57cf")}}]);