(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e70e69c"],{"4e0c":function(e,a,t){},"7a16":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e._self._c;return a("div",{staticClass:"helpApply"},[a("header",[a("div",{staticClass:"headerHead"},[a("div",[a("div",{class:{headerF:e.isShow}},[e._v("在线填表")])]),a("div",{staticClass:"headerRectangle"}),a("div",[a("div",{class:{headerF:e.isShow2}},[e._v("材料申报")])])])]),a("main",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.page1,expression:"page1"}],staticStyle:{display:"block","padding-top":"20px"},attrs:{id:"page1"}},[a("div",{staticClass:"page1Div1"},[e._m(0),a("van-form",{ref:"apply",staticStyle:{"margin-top":"20px"},on:{submit:e.next1}},[a("van-field",{attrs:{required:"",name:"ab_ex75",label:"申请方式",rules:e.rules.rules1},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-radio-group",{attrs:{direction:"horizontal"},model:{value:e.form.ab_ex75,callback:function(a){e.$set(e.form,"ab_ex75",a)},expression:"form.ab_ex75"}},[a("van-radio",{attrs:{name:"委托代理"}},[e._v("代申请")]),a("van-radio",{attrs:{name:"本人"}},[e._v("本人")])],1)]},proxy:!0}])}),a("van-field",{attrs:{required:"",name:"ab_ex3",maxlength:"10",label:"姓名",placeholder:"姓名",rules:e.rules.rules2},model:{value:e.form.ab_ex3,callback:function(a){e.$set(e.form,"ab_ex3",a)},expression:"form.ab_ex3"}}),a("van-field",{attrs:{required:"",name:"ab_ex7",label:"身份证号",placeholder:"身份证号",rules:e.rules.rules3},on:{input:function(a){return e.changeCard1(a,"ab_ex69")}},model:{value:e.form.ab_ex7,callback:function(a){e.$set(e.form,"ab_ex7",a)},expression:"form.ab_ex7"}}),a("van-field",{attrs:{disabled:"",name:"ab_ex69",label:"性别",placeholder:"性别"},model:{value:e.form.ab_ex69,callback:function(a){e.$set(e.form,"ab_ex69",a)},expression:"form.ab_ex69"}}),a("van-field",{attrs:{required:"",name:"ab_ex162_2",center:"",readonly:"",label:"行政区划",placeholder:"请选择所在行政区划",rules:e.rules.rules4},on:{click:function(a){e.show=!0}},model:{value:e.ab_ex162_2,callback:function(a){e.ab_ex162_2=a},expression:"ab_ex162_2"}}),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.show,callback:function(a){e.show=a},expression:"show"}},[a("van-cascader",{attrs:{title:"请选择所在行政区划",options:e.options},on:{click:function(a){e.show=!1},finish:e.onFinish}})],1),a("van-field",{attrs:{required:"",name:"ab_ex11",label:"家庭住址",placeholder:"家庭住址",rules:e.rules.rules5},model:{value:e.form.ab_ex11,callback:function(a){e.$set(e.form,"ab_ex11",a)},expression:"form.ab_ex11"}}),a("van-field",{attrs:{required:"",center:"",type:"number",name:"ab_ex28",label:"联系电话",placeholder:"联系电话",rules:e.rules.rules8},scopedSlots:e._u([{key:"button",fn:function(){return[a("van-button",{attrs:{size:"small",type:"info",disabled:e.hqyzmDis,"native-type":"button"},on:{click:e.hqyzm}},[e._v(e._s(e.hqyzmtext))])]},proxy:!0}]),model:{value:e.form.ab_ex28,callback:function(a){e.$set(e.form,"ab_ex28",a)},expression:"form.ab_ex28"}}),a("van-field",{attrs:{center:"",name:"yanzm",type:"number",label:"验证码",placeholder:"验证码",rules:[{required:!0,message:"请填写验证码"}]},model:{value:e.form.yanzm,callback:function(a){e.$set(e.form,"yanzm",a)},expression:"form.yanzm"}}),a("van-field",{attrs:{required:"",name:"ab_ex83",label:"患病类别",rules:e.rules.rules10},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-radio-group",{attrs:{direction:"horizontal"},on:{change:e.hblbChange},model:{value:e.form.ab_ex83,callback:function(a){e.$set(e.form,"ab_ex83",a)},expression:"form.ab_ex83"}},[a("van-radio",{staticClass:"marginstyle",attrs:{name:"尿毒症",shape:"square"}},[e._v("尿毒症")]),a("van-radio",{staticClass:"marginstyle",attrs:{name:"白血病",shape:"square"}},[e._v("白血病")]),a("van-radio",{staticClass:"marginstyle",attrs:{name:"重性精神病",shape:"square"}},[e._v("重性精神病")])],1)]},proxy:!0}])}),a("van-field",{attrs:{required:"",name:"ab_ex152",label:"参保险种",rules:e.rules.rules11},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-radio-group",{attrs:{direction:"horizontal"},model:{value:e.form.ab_ex152,callback:function(a){e.$set(e.form,"ab_ex152",a)},expression:"form.ab_ex152"}},[a("van-radio",{staticClass:"marginstyle",attrs:{name:"职工医保",shape:"square"}},[e._v("职工医保")]),a("van-radio",{staticClass:"marginstyle",attrs:{name:"居民医保",shape:"square"}},[e._v("居民医保")])],1)]},proxy:!0}])}),"重性精神病"!=e.form.ab_ex83?a("van-field",{attrs:{name:"ab_ex143",maxlength:"30",label:"困难对象类别",placeholder:"困难对象类别"},model:{value:e.form.ab_ex143,callback:function(a){e.$set(e.form,"ab_ex143",a)},expression:"form.ab_ex143"}}):e._e(),"重性精神病"==e.form.ab_ex83?a("van-field",{attrs:{name:"ab_ex88",maxlength:"30",label:"疾病诊断",placeholder:"疾病诊断"},model:{value:e.form.ab_ex88,callback:function(a){e.$set(e.form,"ab_ex88",a)},expression:"form.ab_ex88"}}):e._e(),"重性精神病"==e.form.ab_ex83?a("van-field",{attrs:{name:"ab_ex29",maxlength:"10",label:"监护人姓名",placeholder:"监护人姓名"},model:{value:e.form.ab_ex29,callback:function(a){e.$set(e.form,"ab_ex29",a)},expression:"form.ab_ex29"}}):e._e(),"重性精神病"==e.form.ab_ex83?a("van-field",{attrs:{name:"ab_ex31",label:"监护人身份证号码",placeholder:"监护人身份证号码"},model:{value:e.form.ab_ex31,callback:function(a){e.$set(e.form,"ab_ex31",a)},expression:"form.ab_ex31"}}):e._e(),a("van-field",{attrs:{name:"ab_ex42",maxlength:"15",label:"开户银行",placeholder:"开户银行"},model:{value:e.form.ab_ex42,callback:function(a){e.$set(e.form,"ab_ex42",a)},expression:"form.ab_ex42"}}),a("van-field",{attrs:{name:"ab_ex8",maxlength:"15",label:"开户人",placeholder:"开户人"},model:{value:e.form.ab_ex8,callback:function(a){e.$set(e.form,"ab_ex8",a)},expression:"form.ab_ex8"}}),a("van-field",{attrs:{name:"ab_ex43",maxlength:"22",label:"银行账号",placeholder:"银行账号",onkeyup:"value=value.replace(/[^\\dx]/gi,'')"},model:{value:e.form.ab_ex43,callback:function(a){e.$set(e.form,"ab_ex43",a)},expression:"form.ab_ex43"}}),a("van-field",{attrs:{name:"ab_ex30",maxlength:"30",label:"持卡人姓名及与受助人关系",placeholder:"持卡人姓名及与受助人关系"},model:{value:e.form.ab_ex30,callback:function(a){e.$set(e.form,"ab_ex30",a)},expression:"form.ab_ex30"}}),a("div",{staticStyle:{margin:"16px 0 16px 0",display:"flex","justify-content":"space-around"}},[a("van-button",{attrs:{block:"",type:"info","native-type":"button"},on:{click:e.next1}},[e._v("下一步")])],1)],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.page2,expression:"page2"}],staticStyle:{display:"none"},attrs:{id:"page2"}},[a("div",{staticClass:"page2Class"},[a("div",{staticStyle:{height:"40px","line-height":"40px"}},[e._v("身份证照片:")]),a("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"img"}},[a("div",{staticStyle:{position:"relative",width:"100%",float:"left"},attrs:{id:"be"}},[a("div",{staticClass:"cd-bouncy-nav-trigger",staticStyle:{width:"40%",height:"100px","text-align":"center",float:"left","margin-left":"20px"},attrs:{id:"sfzm"}},[a("van-uploader",{attrs:{"before-read":e.beforeRead,"max-count":1,"after-read":e.uploadImg(1),"before-delete":e.beforeDelete("ab_ex10_1")},model:{value:e.fileList,callback:function(a){e.fileList=a},expression:"fileList"}}),a("br"),a("span",[e._v("上传身份证正面")])],1),a("div",{staticClass:"cd-bouncy-nav-trigger",staticStyle:{width:"40%",height:"100px","text-align":"center",float:"right","margin-right":"20px"},attrs:{id:"sfzm2"}},[a("van-uploader",{attrs:{"before-read":e.beforeRead,"max-count":1,"after-read":e.uploadImg(2),"before-delete":e.beforeDelete("ab_ex10_2")},model:{value:e.fileList2,callback:function(a){e.fileList2=a},expression:"fileList2"}}),a("br"),a("span",[e._v("上传身份证反面")])],1)])])]),a("div",{staticClass:"page2Class2"},[a("div",{staticStyle:{height:"40px","line-height":"40px"}},[e._v("证明材料照片:")]),a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticStyle:{position:"relative",width:"100%",float:"left"},attrs:{id:"zmcl"}},[a("van-uploader",{attrs:{"before-read":e.beforeRead,"after-read":e.uploadImg(3),"before-delete":e.beforeDelete("ab_ex16")},model:{value:e.fileList3,callback:function(a){e.fileList3=a},expression:"fileList3"}})],1)])]),a("div",{staticClass:"page2Class2"},[a("div",{staticStyle:{height:"40px","line-height":"40px"}},[e._v("银行卡复印件:")]),a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticStyle:{position:"relative",width:"100%",float:"left"},attrs:{id:"zmcl"}},[a("van-uploader",{attrs:{"before-read":e.beforeRead,"after-read":e.uploadImg(4),"before-delete":e.beforeDelete("ab_ex141")},model:{value:e.fileList4,callback:function(a){e.fileList4=a},expression:"fileList4"}})],1)])]),a("div",{staticStyle:{"margin-top":"20px",display:"flex","justify-content":"space-around"}},[a("van-button",{attrs:{block:"","native-type":"button"},on:{click:e.back2}},[e._v("上一步")]),a("van-button",{attrs:{block:"",type:"info"},on:{click:e.save}},[e._v("提交")])],1)])]),a("footer")])},i=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"page1Div2"},[a("span",{staticStyle:{"background-color":"#333333",display:"inline-block",width:"5px",height:"10px"}}),a("span",{staticStyle:{color:"#333333"}},[e._v("基本信息")])])}],o=t("b775"),r=t("fa7d"),l={data(){return{isShow:!0,isShow2:!1,checked:!1,page1:!0,page2:!1,hqyzmtext:"获取验证码",m:60,rules:{rules1:[{required:!0,message:"请选择申请方式",trigger:"onBlur"}],rules2:[{required:!0,message:"请填写姓名",trigger:"onBlur"}],rules3:[{required:!0,message:"请填写身份证号",trigger:"onBlur"}],rules4:[{required:!0,message:"请选择行政区划",trigger:"onBlur"}],rules5:[{required:!0,message:"请填写家庭住址",trigger:"onBlur"}],rules8:[{required:!0,message:"请填写联系电话",trigger:"onBlur"}],rules10:[{required:!0,message:"请选择患病类别",trigger:"onBlur"}],rules11:[{required:!0,message:"请选择参保险种",trigger:"onBlur"}]},form:{ab_ex75:"本人",ab_ex3:"",ab_ex7:"",ab_ex1:"",ab_ex2:"",ab_ex11:"",ab_ex28:"",ab_ex83:"",ab_ex152:"",ab_ex161:"",ab_ex162:"",yanzm:"",ab_dat14:"",ab_ex10_1:"",ab_ex10_2:"",ab_ex16:"",ab_ex69:"",ab_ex143:"",ab_ex88:"",ab_ex29:"",ab_ex31:"",ab_ex42:"",ab_ex8:"",ab_ex43:"",ab_ex30:"",ab_ex141:"",ab_ex13:"医疗救助"},fileList:[],fileList2:[],fileList3:[],fileList4:[],ab_ex162:"",ab_ex162_2:"",yzm:"",show:!1,hqyzmDis:!1,options:r["j"]}},created(){console.log(11)},methods:{changeCard1(e,a){""==Object(r["e"])(e)&&this.$set(this.form,a,Object(r["d"])(e))},next1(){this.form.ab_ex3=this.form.ab_ex3.replace(/\s*/g,"");let e=Object(r["i"])(this.form.ab_ex3);if(e)return this.$toast.fail("请输入正确的姓名"),!1;let a=Object(r["e"])(this.form.ab_ex7);if(a)return this.$toast.fail(a),!1;if((!this.yzm||this.yzm!=this.form.yanzm)&&"0"!=this.form.yanzm)return this.$toast.fail("验证码错误"),!1;if("重性精神病"==this.form.ab_ex83){this.form.ab_ex29=this.form.ab_ex29.replace(/\s*/g,"");let e=Object(r["i"])(this.form.ab_ex29);if(e)return this.$toast.fail("请输入正确的监护人姓名"),!1;this.form.ab_ex88=this.form.ab_ex88.replace(/\s*/g,""),this.form.ab_ex88=Object(r["h"])(this.form.ab_ex88);let a=Object(r["e"])(this.form.ab_ex31);if(a)return this.$toast.fail("监护人"+a),!1}"重性精神病"!=this.form.ab_ex83&&(this.form.ab_ex143=this.form.ab_ex143.replace(/\s*/g,""),this.form.ab_ex143=Object(r["g"])(this.form.ab_ex143)),this.form.ab_ex42=this.form.ab_ex42.replace(/\s*/g,""),this.form.ab_ex42=Object(r["g"])(this.form.ab_ex42),this.form.ab_ex8=this.form.ab_ex8.replace(/\s*/g,""),this.form.ab_ex8=Object(r["g"])(this.form.ab_ex8),this.form.ab_ex30=this.form.ab_ex30.replace(/\s*/g,""),this.form.ab_ex30=Object(r["g"])(this.form.ab_ex30),Object(o["a"])({method:"post",url:"/social/assistanceWeixin/checkRepeat",data:{ab_ex13:this.form.ab_ex13,ab_ex7:this.form.ab_ex7,ab_ex3:this.form.ab_ex3}}).then(e=>{console.log(e),"+OK"==e[0].status?(console.log(this.form),this.$refs.apply.validate().then(()=>{document.getElementsByClassName("helpApply")[0].scrollTop=0,this.page1=!1,this.page2=!0,this.isShow=!1,this.isShow2=!0}).catch(e=>{console.log(e),this.$toast.fail(e[0].message)})):this.$toast.fail(e[0].msg)}).catch(e=>{this.$toast.fail("数据请求失败")})},back2(){this.page1=!0,this.page2=!1,this.isShow=!0,this.isShow2=!1},save(){if(!this.form.ab_ex10_1)return void this.$dialog({message:"请上传身份证正面照片"});if(!this.form.ab_ex10_2)return void this.$dialog({message:"请上传身份证反面照片"});let e=this.$toast({type:"loading",message:"提交中...",overlay:!0,duration:0});var a=new Date,t=a.getFullYear(),s=a.getMonth()+1,i=a.getDate(),r=(a.getDay(),a.getHours()),l=a.getMinutes(),n=a.getSeconds();document.getElementById("Date");r<10&&(r="0"+r),l<10&&(l="0"+l),n<10&&(n="0"+n);var m=t+"-"+s+"-"+i+" "+r+":"+l+":"+n;this.form.ab_dat14=m,Object(o["a"])({method:"post",url:"/social/assistanceWeixin/saveApply",data:{data:"["+JSON.stringify(this.form)+"]",type:"申请"}}).then(a=>{e.clear(),this.$dialog.alert({message:"提交成功"}).then(()=>{this.$router.push("/")}),console.log(a)}).catch(a=>{e.clear(),this.$toast.fail("提交失败"),console.log(a)})},onFinish({selectedOptions:e}){this.show=!1,console.log(e.map(e=>e.text));let a=e.map(e=>e.text),t=e.map(e=>e.text+e.value);this.form.ab_ex1=a[2],this.form.ab_ex2=a[1],this.form.ab_ex161=a[0],this.ab_ex162_2=a.join("/"),this.form.ab_ex162=t.join(","),""==this.form.ab_ex11&&(this.form.ab_ex11=a[0]+a[1]+a[2])},hblbChange(e){"重性精神病"!=e&&(this.form.ab_ex143="",this.form.ab_ex88="",this.form.ab_ex29="",this.form.ab_ex31="")},hqyzm(){var e=/^[1][3,4,5,7,8,9][0-9]{9}$/;if(!e.test(this.form.ab_ex28))return this.$toast.fail("请填写正确的手机号"),!1;console.log("-----------------"),Object(o["a"])({method:"get",url:"/social/assistanceWeixin/backTelCheck",params:{tel:this.form.ab_ex28}}).then(e=>{"+OK"==e[0].status?(this.$toast.success(e[0].msg),this.yzm=e[0].Vcode):this.$toast.fail(e[0].msg)}).catch(e=>{this.$toast.fail("验证码发送失败"),console.log(e)}),console.log("-----------------"),this.hqyzmtext=this.m+"s",this.hqyzmDis=!0;let a=setInterval(()=>{this.m--,this.hqyzmtext=this.m+"s",0==this.m&&(this.hqyzmtext="获取验证码",this.m=60,this.hqyzmDis=!1,clearInterval(a))},1e3)},beforeRead(e){return"image/heic"!=e.type&&""!=e.type||(this.$toast.fail("照片格式不正确"),!1)},imgRequest(e,a,t){Object(o["a"])({method:"post",url:"/social/minios/fileUpload",data:e}).then(e=>{a.status="done",a.message="上传完成",console.log(e),1==t?this.form.ab_ex10_1=e[0].filename:2==t?this.form.ab_ex10_2=e[0].filename:3==t?(console.log(1111),this.form.ab_ex16?this.form.ab_ex16=this.form.ab_ex16.concat(",",e[0].filename):this.form.ab_ex16=this.form.ab_ex16.concat(e[0].filename),console.log(this.form.ab_ex16)):4==t&&(this.form.ab_ex141?this.form.ab_ex141=this.form.ab_ex141.concat(",",e[0].filename):this.form.ab_ex141=this.form.ab_ex141.concat(e[0].filename),console.log(this.form.ab_ex141))}).catch(e=>{a.status="failed",a.message="上传失败",1==t?this.fileList.pop():2==t?this.fileList2.pop():3==t?this.fileList3.pop():4==t&&this.fileList4.pop(),this.$toast.fail("上传失败"),console.log(e)})},uploadImg(e){return a=>{console.log(a),console.log(e),a.status="uploading",a.message="上传中...";new r["a"](a,e,this.imgRequest)}},beforeDelete(e){return(a,t)=>{let s=this.form[e].split(",");return s.splice(t.index,1),this.form[e]=s.join(","),console.log(this.form[e]),console.log(e),console.log(a),console.log(t),!0}}}},n=l,m=(t("e760"),t("2877")),c=Object(m["a"])(n,s,i,!1,null,"de44780a",null);a["default"]=c.exports},e760:function(e,a,t){"use strict";t("4e0c")}}]);