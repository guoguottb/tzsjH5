(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2de742"],{d411:function(e,a,t){},e503:function(e,a,t){"use strict";t("d411")},ed05:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e._self._c;return a("div",{staticClass:"helpApply"},[a("header",[a("div",{staticClass:"headerHead"},[a("div",[a("div",{class:{headerF:e.isShow}},[e._v("在线填表")])]),a("div",{staticClass:"headerRectangle"}),a("div",[a("div",{class:{headerF:e.isShow2}},[e._v("材料申报")])])])]),a("main",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.page1,expression:"page1"}],staticStyle:{display:"block","padding-top":"20px"},attrs:{id:"page1"}},[a("div",{staticClass:"page1Div1"},[e._m(0),a("van-form",{ref:"apply",staticStyle:{"margin-top":"20px"},on:{submit:e.next1}},[a("van-field",{attrs:{required:"",name:"ab_ex75",label:"申请方式",rules:e.rules.rules1},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-radio-group",{attrs:{direction:"horizontal"},model:{value:e.form.ab_ex75,callback:function(a){e.$set(e.form,"ab_ex75",a)},expression:"form.ab_ex75"}},[a("van-radio",{attrs:{name:"委托代理"}},[e._v("代申请")]),a("van-radio",{attrs:{name:"本人"}},[e._v("本人")])],1)]},proxy:!0}])}),a("van-field",{attrs:{required:"",center:"",readonly:"",clickable:"",name:"ab_ex46",label:"救助项目",placeholder:"请选择救助项目",rules:e.rules.rules12},on:{click:function(a){e.show2=!0}},model:{value:e.form.ab_ex46,callback:function(a){e.$set(e.form,"ab_ex46",a)},expression:"form.ab_ex46"}}),a("van-popup",{attrs:{position:"bottom"},model:{value:e.show2,callback:function(a){e.show2=a},expression:"show2"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:e.columns},on:{confirm:function(a){e.onConfirm21(a,e.form,"ab_ex46","show2"),e.jzxmChange(a)},cancel:function(a){e.show2=!1}}})],1),a("van-field",{attrs:{required:"",name:"ab_ex3",maxlength:"10",label:"姓名",placeholder:"姓名",rules:e.rules.rules2},model:{value:e.form.ab_ex3,callback:function(a){e.$set(e.form,"ab_ex3",a)},expression:"form.ab_ex3"}}),a("van-field",{attrs:{required:"",name:"ab_ex7",label:"身份证号",placeholder:"身份证号",rules:e.rules.rules3},on:{input:function(a){return e.changeCard1(a,"ab_ex69","ab_dat11")}},model:{value:e.form.ab_ex7,callback:function(a){e.$set(e.form,"ab_ex7",a)},expression:"form.ab_ex7"}}),a("van-field",{attrs:{required:"",name:"ab_ex162_2",center:"",readonly:"",label:"行政区划",placeholder:"请选择所在行政区划",rules:e.rules.rules4},on:{click:function(a){e.show=!0}},model:{value:e.ab_ex162_2,callback:function(a){e.ab_ex162_2=a},expression:"ab_ex162_2"}}),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.show,callback:function(a){e.show=a},expression:"show"}},[a("van-cascader",{attrs:{title:"请选择所在行政区划",options:e.options},on:{click:function(a){e.show=!1},finish:e.onFinish}})],1),a("van-field",{attrs:{required:"",center:"",type:"number",name:"ab_ex28",label:"联系电话",placeholder:"联系电话",rules:e.rules.rules8},scopedSlots:e._u([{key:"button",fn:function(){return[a("van-button",{attrs:{size:"small",type:"info",disabled:e.hqyzmDis,"native-type":"button"},on:{click:e.hqyzm}},[e._v(e._s(e.hqyzmtext))])]},proxy:!0}]),model:{value:e.form.ab_ex28,callback:function(a){e.$set(e.form,"ab_ex28",a)},expression:"form.ab_ex28"}}),a("van-field",{attrs:{center:"",name:"yanzm",type:"number",label:"验证码",placeholder:"验证码",rules:[{required:!0,message:"请填写验证码"}]},model:{value:e.form.yanzm,callback:function(a){e.$set(e.form,"yanzm",a)},expression:"form.yanzm"}}),"造血干细胞移植资助申请"!=e.form.ab_ex46?a("van-field",{attrs:{required:"",name:"ab_ex11",maxlength:"50",label:"家庭住址",placeholder:"家庭住址",rules:[{required:!0,message:"请填写家庭住址"}]},model:{value:e.form.ab_ex11,callback:function(a){e.$set(e.form,"ab_ex11",a)},expression:"form.ab_ex11"}}):e._e(),"博爱光明行"==e.form.ab_ex46?a("van-field",{attrs:{required:"",name:"ab_ex50",maxlength:"6",type:"number",label:"邮政编码",placeholder:"邮政编码",rules:[{required:!0,message:"请填写邮政编码"}]},model:{value:e.form.ab_ex50,callback:function(a){e.$set(e.form,"ab_ex50",a)},expression:"form.ab_ex50"}}):e._e(),"博爱光明行"==e.form.ab_ex46?a("van-field",{attrs:{required:"",name:"ab_ex29",maxlength:"10",label:"监护人姓名",placeholder:"监护人姓名",rules:[{required:!0,message:"请填写监护人姓名"}]},model:{value:e.form.ab_ex29,callback:function(a){e.$set(e.form,"ab_ex29",a)},expression:"form.ab_ex29"}}):e._e(),"博爱光明行"==e.form.ab_ex46?a("van-field",{attrs:{required:"",name:"ab_ex30",maxlength:"30",label:"监护人地址",placeholder:"监护人地址",rules:[{required:!0,message:"请填写监护人地址"}]},model:{value:e.form.ab_ex30,callback:function(a){e.$set(e.form,"ab_ex30",a)},expression:"form.ab_ex30"}}):e._e(),"博爱光明行"==e.form.ab_ex46?a("van-field",{attrs:{required:"",name:"ab_ex58",type:"number",label:"年收入",placeholder:"年收入",rules:[{required:!0,message:"请填写年收入"}]},model:{value:e.form.ab_ex58,callback:function(a){e.$set(e.form,"ab_ex58",a)},expression:"form.ab_ex58"}}):e._e(),"博爱光明行"==e.form.ab_ex46?a("van-field",{attrs:{required:"",center:"",readonly:"",clickable:"",name:"ab_ex37",label:"医保类型",placeholder:"请选择医保类型",rules:[{required:!0,message:"请选择医保类型"}]},on:{click:function(a){e.show3=!0}},model:{value:e.form.ab_ex37,callback:function(a){e.$set(e.form,"ab_ex37",a)},expression:"form.ab_ex37"}}):e._e(),a("van-popup",{attrs:{position:"bottom"},model:{value:e.show3,callback:function(a){e.show3=a},expression:"show3"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:e.columns2},on:{confirm:function(a){return e.onConfirm21(a,e.form,"ab_ex37","show3")},cancel:function(a){e.show3=!1}}})],1),"血液病救助"==e.form.ab_ex46?a("van-field",{attrs:{required:"",name:"ab_ex45",maxlength:"30",label:"所患病型",placeholder:"所患病型",rules:[{required:!0,message:"请填写所患病型"}]},model:{value:e.form.ab_ex45,callback:function(a){e.$set(e.form,"ab_ex45",a)},expression:"form.ab_ex45"}}):e._e(),"血液病救助"==e.form.ab_ex46?a("van-field",{attrs:{required:"",name:"ab_ex43",maxlength:"22",label:"患者银行账号",placeholder:"患者银行账号",rules:[{required:!0,message:"请填写患者银行账号"}],onkeyup:"value=value.replace(/[^\\dx]/gi,'')"},model:{value:e.form.ab_ex43,callback:function(a){e.$set(e.form,"ab_ex43",a)},expression:"form.ab_ex43"}}):e._e(),"血液病救助"==e.form.ab_ex46?a("van-field",{attrs:{required:"",name:"ab_ex42",maxlength:"15",label:"开户行",placeholder:"开户行",rules:[{required:!0,message:"请填写开户行"}]},model:{value:e.form.ab_ex42,callback:function(a){e.$set(e.form,"ab_ex42",a)},expression:"form.ab_ex42"}}):e._e(),"血液病救助"==e.form.ab_ex46?a("van-field",{attrs:{required:"",type:"textarea",autosize:"",rows:2,name:"ab_ex93",label:"救助事由",placeholder:"救助事由",rules:[{required:!0,message:"请填写救助事由"}]},model:{value:e.form.ab_ex93,callback:function(a){e.$set(e.form,"ab_ex93",a)},expression:"form.ab_ex93"}}):e._e(),"造血干细胞移植资助申请"==e.form.ab_ex46?a("van-field",{attrs:{required:"",type:"number",name:"ab_ex40",label:"移植费用",placeholder:"移植费用",rules:[{required:!0,message:"请填写移植费用"}]},model:{value:e.form.ab_ex40,callback:function(a){e.$set(e.form,"ab_ex40",a)},expression:"form.ab_ex40"}}):e._e(),"造血干细胞移植资助申请"==e.form.ab_ex46?a("van-field",{attrs:{required:"",name:"ab_ex80",label:"是否获得过资助",rules:[{required:!0,message:"请选择是否获得过资助"}]},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-radio-group",{attrs:{direction:"horizontal"},model:{value:e.form.ab_ex80,callback:function(a){e.$set(e.form,"ab_ex80",a)},expression:"form.ab_ex80"}},[a("van-radio",{attrs:{name:"是"}},[e._v("是")]),a("van-radio",{attrs:{name:"否"}},[e._v("否")])],1)]},proxy:!0}],null,!1,2131079564)}):e._e(),"是"==e.form.ab_ex80?a("van-field",{attrs:{required:"",type:"number",name:"ab_ex84",label:"获得资助金额(万)",placeholder:"获得资助金额(万)",rules:[{required:!0,message:"请填写获得资助金额(万)"}]},model:{value:e.form.ab_ex84,callback:function(a){e.$set(e.form,"ab_ex84",a)},expression:"form.ab_ex84"}}):e._e(),"是"==e.form.ab_ex80?a("van-field",{attrs:{required:"",type:"digit",name:"ab_dat12",label:"获得资助时间(年)",placeholder:"获得资助时间(年)",rules:[{required:!0,message:"请填写获得资助时间(年)"}]},model:{value:e.form.ab_dat12,callback:function(a){e.$set(e.form,"ab_dat12",a)},expression:"form.ab_dat12"}}):e._e(),a("div",{staticStyle:{margin:"16px 0 16px 0",display:"flex","justify-content":"space-around"}},[a("van-button",{attrs:{block:"",type:"info","native-type":"button"},on:{click:e.next1}},[e._v("下一步")])],1)],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.page2,expression:"page2"}],staticStyle:{display:"none"},attrs:{id:"page2"}},[a("div",{staticClass:"page2Class"},[a("div",{staticStyle:{height:"40px","line-height":"40px"}},[e._v("身份证照片:")]),a("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"img"}},[a("div",{staticStyle:{position:"relative",width:"100%",float:"left"},attrs:{id:"be"}},[a("div",{staticStyle:{width:"40%",height:"200px","text-align":"center",float:"left","margin-left":"20px"},attrs:{id:"sfzm"}},[a("van-uploader",{attrs:{"before-read":e.beforeRead,"max-count":1,"after-read":e.uploadImg(1),"before-delete":e.beforeDelete("ab_ex10_1")},model:{value:e.fileList,callback:function(a){e.fileList=a},expression:"fileList"}}),a("br"),a("span",[e._v("上传身份证正面")])],1),a("div",{staticClass:"cd-bouncy-nav-trigger",staticStyle:{width:"40%",height:"200px","text-align":"center",float:"right","margin-right":"20px"},attrs:{id:"sfzm2"}},[a("van-uploader",{attrs:{"before-read":e.beforeRead,"max-count":1,"after-read":e.uploadImg(2),"before-delete":e.beforeDelete("ab_ex10_2")},model:{value:e.fileList2,callback:function(a){e.fileList2=a},expression:"fileList2"}}),a("br"),a("span",[e._v("上传身份证反面")])],1)])])]),a("div",{staticClass:"page2Class2"},[a("div",{staticStyle:{height:"40px","line-height":"40px"}},[e._v("证明材料照片:")]),a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticStyle:{position:"relative",width:"100%",float:"left"},attrs:{id:"zmcl"}},[a("van-uploader",{attrs:{"before-read":e.beforeRead,"after-read":e.uploadImg(3),"before-delete":e.beforeDelete("ab_ex16")},model:{value:e.fileList3,callback:function(a){e.fileList3=a},expression:"fileList3"}})],1)])]),a("div",{staticStyle:{"margin-top":"20px",display:"flex","justify-content":"space-around"}},[a("van-button",{attrs:{block:"","native-type":"button"},on:{click:e.back2}},[e._v("上一步")]),a("van-button",{attrs:{block:"",type:"info"},on:{click:e.save}},[e._v("提交")])],1)])]),a("footer")])},o=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"page1Div2"},[a("span",{staticStyle:{"background-color":"#333333",display:"inline-block",width:"5px",height:"10px"}}),a("span",{staticStyle:{color:"#333333"}},[e._v("基本信息")])])}],r=t("b775"),i=t("fa7d"),l={data(){return{isShow:!0,isShow2:!1,checked:!1,page1:!0,page2:!1,hqyzmtext:"获取验证码",m:60,rules:{rules1:[{required:!0,message:"请选择申请方式",trigger:"onBlur"}],rules2:[{required:!0,message:"请填写姓名",trigger:"onBlur"}],rules3:[{required:!0,message:"请填写身份证号",trigger:"onBlur"}],rules4:[{required:!0,message:"请选择行政区划",trigger:"onBlur"}],rules8:[{required:!0,message:"请填写联系电话",trigger:"onBlur"}],rules12:[{required:!0,message:"请选择救助项目",trigger:"onBlur"}]},form:{ab_ex75:"本人",ab_ex46:"",ab_ex3:"",ab_ex7:"",ab_ex1:"",ab_ex2:"",ab_ex28:"",ab_ex161:"",ab_ex162:"",ab_dat14:"",ab_ex10_1:"",ab_ex10_2:"",ab_ex16:"",ab_ex69:"",yanzm:"",ab_ex11:"",ab_ex50:"",ab_ex29:"",ab_ex30:"",ab_ex58:"",ab_ex37:"",ab_ex45:"",ab_ex43:"",ab_ex42:"",ab_ex93:"",ab_ex40:"",ab_ex80:"",ab_ex84:"",ab_dat12:"",ab_ex13:"红会救助"},fileList:[],fileList2:[],fileList3:[],ab_ex162:"",ab_ex162_2:"",yzm:"",show:!1,hqyzmDis:!1,options:i["j"],show2:!1,columns:["博爱光明行","血液病救助","造血干细胞移植资助申请"],show3:!1,columns2:["","职工医保","居民医保","新农合","其它"]}},created(){Object(r["a"])({method:"post",url:"/social/assistanceWeixin/getUserInfo",params:{userId:localStorage.getItem("cs_userId")?localStorage.getItem("cs_userId"):""}}).then(e=>{console.log(e),e.success&&(this.form.ab_ex7=e.data.cardNo,this.form.ab_ex28=e.data.phone,this.form.ab_ex3=e.data.userName,this.form.ab_ex69=e.data.sex)}).catch(e=>{this.$toast.fail("数据请求失败")})},methods:{changeCard1(e,a,t){""==Object(i["e"])(e)&&(this.$set(this.form,a,Object(i["d"])(e)),this.$set(this.form,t,Object(i["c"])(e)))},next1(){this.form.ab_ex3=this.form.ab_ex3.replace(/\s*/g,"");let e=Object(i["i"])(this.form.ab_ex3);if(e)return this.$toast.fail("请输入正确的姓名"),!1;let a=Object(i["e"])(this.form.ab_ex7);if(a)return this.$toast.fail(a),!1;var t=/^[1][3,4,5,7,8,9][0-9]{9}$/;if(!t.test(this.form.ab_ex28))return this.$toast.fail("请填写正确的手机号"),!1;if((!this.yzm||this.yzm!=this.form.yanzm)&&"0"!=this.form.yanzm)return this.$toast.fail("验证码错误"),!1;if("造血干细胞移植资助申请"!=this.form.ab_ex46&&(this.form.ab_ex11=this.form.ab_ex11.replace(/\s*/g,""),this.form.ab_ex11=Object(i["g"])(this.form.ab_ex11)),"血液病救助"==this.form.ab_ex46&&(this.form.ab_ex45=this.form.ab_ex45.replace(/\s*/g,""),this.form.ab_ex45=Object(i["g"])(this.form.ab_ex45),this.form.ab_ex42=this.form.ab_ex42.replace(/\s*/g,""),this.form.ab_ex42=Object(i["g"])(this.form.ab_ex42)),"博爱光明行"==this.form.ab_ex46){if(this.form.ab_ex30=this.form.ab_ex30.replace(/\s*/g,""),this.form.ab_ex30=Object(i["g"])(this.form.ab_ex30),6!=this.form.ab_ex50.length)return this.$toast.fail("请输入正确的邮政编码"),!1;this.form.ab_ex29=this.form.ab_ex29.replace(/\s*/g,"");let e=Object(i["i"])(this.form.ab_ex29);if(e)return this.$toast.fail("请输入正确的监护人姓名"),!1}Object(r["a"])({method:"post",url:"/social/assistanceWeixin/checkRepeat",data:{ab_ex13:this.form.ab_ex13,ab_ex7:this.form.ab_ex7,ab_ex3:this.form.ab_ex3}}).then(e=>{console.log(e),"+OK"==e[0].status?(console.log(this.form),this.$refs.apply.validate().then(()=>{this.page1=!1,this.page2=!0,this.isShow=!1,this.isShow2=!0}).catch(e=>{console.log(e),this.$toast.fail(e[0].message)})):this.$toast.fail(e[0].msg)}).catch(e=>{this.$toast.fail("数据请求失败")})},back2(){this.page1=!0,this.page2=!1,this.isShow=!0,this.isShow2=!1},jzxmChange(e){"博爱光明行"==e?(this.form.ab_ex45="",this.form.ab_ex43="",this.form.ab_ex42="",this.form.ab_ex93="",this.form.ab_ex40="",this.form.ab_ex80="",this.form.ab_ex84="",this.form.ab_dat12=""):"血液病救助"==e?(this.form.ab_ex50="",this.form.ab_ex29="",this.form.ab_ex30="",this.form.ab_ex58="",this.form.ab_ex37="",this.form.ab_ex40="",this.form.ab_ex80="",this.form.ab_ex84="",this.form.ab_dat12=""):"造血干细胞移植资助申请"==e&&(this.form.ab_ex11="",this.form.ab_ex45="",this.form.ab_ex43="",this.form.ab_ex42="",this.form.ab_ex93="",this.form.ab_ex50="",this.form.ab_ex29="",this.form.ab_ex30="",this.form.ab_ex58="",this.form.ab_ex37="")},onConfirm21(e,a,t,s){a[t]=e,this[s]=!1,console.log(this.form)},save(){if(!this.form.ab_ex10_1)return void this.$dialog({message:"请上传身份证正面照片"});if(!this.form.ab_ex10_2)return void this.$dialog({message:"请上传身份证反面照片"});let e=this.$toast({type:"loading",message:"提交中...",overlay:!0,duration:0});var a=new Date,t=a.getFullYear(),s=a.getMonth()+1,o=a.getDate(),i=(a.getDay(),a.getHours()),l=a.getMinutes(),n=a.getSeconds();document.getElementById("Date");i<10&&(i="0"+i),l<10&&(l="0"+l),n<10&&(n="0"+n);var m=t+"-"+s+"-"+o+" "+i+":"+l+":"+n;this.form.ab_dat14=m,Object(r["a"])({method:"post",url:"/social/assistanceWeixin/saveApply",data:{data:"["+JSON.stringify(this.form)+"]",type:"申请"}}).then(a=>{e.clear(),this.$dialog.alert({message:"提交成功"}).then(()=>{this.$router.push("/")}),console.log(a)}).catch(a=>{e.clear(),this.$toast.fail("提交失败"),console.log(a)})},onFinish({selectedOptions:e}){this.show=!1,console.log(e.map(e=>e.text));let a=e.map(e=>e.text),t=e.map(e=>e.text+e.value);this.form.ab_ex1=a[2],this.form.ab_ex2=a[1],this.form.ab_ex161=a[0],this.ab_ex162_2=a.join("/"),this.form.ab_ex162=t.join(","),""==this.form.ab_ex11&&(this.form.ab_ex11=a[0]+a[1]+a[2])},hqyzm(){var e=/^[1][3,4,5,7,8,9][0-9]{9}$/;if(!e.test(this.form.ab_ex28))return this.$toast.fail("请填写正确的手机号"),!1;console.log("-----------------"),Object(r["a"])({method:"get",url:"/social/assistanceWeixin/backTelCheck",params:{tel:this.form.ab_ex28}}).then(e=>{"+OK"==e[0].status?(this.$toast.success(e[0].msg),this.yzm=e[0].Vcode):this.$toast.fail(e[0].msg)}).catch(e=>{this.$toast.fail("验证码发送失败"),console.log(e)}),console.log("-----------------"),this.hqyzmtext=this.m+"s",this.hqyzmDis=!0;let a=setInterval(()=>{this.m--,this.hqyzmtext=this.m+"s",0==this.m&&(this.hqyzmtext="获取验证码",this.m=60,this.hqyzmDis=!1,clearInterval(a))},1e3)},beforeRead(e){return"image/heic"!=e.type&&""!=e.type||(this.$toast.fail("照片格式不正确"),!1)},imgRequest(e,a,t){Object(r["a"])({method:"post",url:"/social/minios/fileUpload",data:e}).then(e=>{a.status="done",a.message="上传完成",console.log(e),1==t?this.form.ab_ex10_1=e[0].filename:2==t?this.form.ab_ex10_2=e[0].filename:3==t&&(console.log(1111),this.form.ab_ex16?this.form.ab_ex16=this.form.ab_ex16.concat(",",e[0].filename):this.form.ab_ex16=this.form.ab_ex16.concat(e[0].filename),console.log(this.form.ab_ex16))}).catch(e=>{a.status="failed",a.message="上传失败",1==t?this.fileList.pop():2==t?this.fileList2.pop():3==t&&this.fileList3.pop(),this.$toast.fail("上传失败"),console.log(e)})},uploadImg(e){return a=>{console.log(a),console.log(e),a.status="uploading",a.message="上传中...";new i["a"](a,e,this.imgRequest)}},beforeDelete(e){return(a,t)=>{let s=this.form[e].split(",");return s.splice(t.index,1),this.form[e]=s.join(","),console.log(this.form[e]),console.log(e),console.log(a),console.log(t),!0}}}},n=l,m=(t("e503"),t("2877")),b=Object(m["a"])(n,s,o,!1,null,"e1c59496",null);a["default"]=b.exports}}]);