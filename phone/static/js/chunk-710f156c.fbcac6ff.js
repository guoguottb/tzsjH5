(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-710f156c"],{1783:function(e,t,a){"use strict";a("750a")},"750a":function(e,t,a){},c592:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"talk"},[t("div",{staticClass:"fontDiv"},[e._v("意见或者建议")]),t("van-field",{attrs:{rows:"6",autosize:"",type:"textarea",placeholder:"请输入留言"},model:{value:e.data1,callback:function(t){e.data1=t},expression:"data1"}}),t("div",{staticClass:"fontDiv"},[e._v("添加图片")]),t("van-cell",[t("van-uploader",{attrs:{"before-read":e.beforeRead,"after-read":e.uploadImg(1),"before-delete":e.beforeDelete("image")},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1),t("div",{staticClass:"fontDiv"},[e._v("选填，方便我们与你联系")]),t("van-field",{attrs:{type:"tel",rows:"1",autosize:"",placeholder:"请输入您的手机号,便于我们联系"},model:{value:e.data2,callback:function(t){e.data2=t},expression:"data2"}}),t("van-button",{staticStyle:{width:"94%","margin-top":"20px"},attrs:{type:"info"},on:{click:e.submit}},[e._v("提交")])],1)},i=[],o=a("b775"),l=a("fa7d"),n={data(){return{data1:"",data2:"",fileList:[],image:""}},methods:{beforeRead(e){return"image/heic"!=e.type&&""!=e.type||(this.$toast.fail("照片格式不正确"),!1)},imgRequest(e,t,a){Object(o["a"])({method:"post",url:"/social/minios/fileUpload",data:e}).then(e=>{t.status="done",t.message="上传完成",console.log(e),1==a&&(this.image?this.image=this.image.concat(",",e[0].filename):this.image=this.image.concat(e[0].filename))}).catch(e=>{t.status="failed",t.message="上传失败",1==a&&this.fileList.pop(),this.$toast.fail("上传失败"),console.log(e)})},uploadImg(e){return t=>{console.log(t),console.log(e),t.status="uploading",t.message="上传中...";new l["a"](t,e,this.imgRequest)}},beforeDelete(e){return(t,a)=>{let s=this[e].split(",");return s.splice(a.index,1),this[e]=s.join(","),console.log(this[e]),console.log(e),console.log(t),console.log(a),!0}},submit(){var e=/^[1][3,4,5,7,8,9][0-9]{9}$/;e.test(this.data2)?Object(o["a"])({method:"post",url:"/social/assistanceWeixin/saveMessageBoard",data:{amb_ex1:this.data1,amb_ex2:this.image,amb_ex3:this.data2}}).then(e=>{console.log(e),this.$dialog.alert({message:e[0].msg}).then(()=>{this.$router.back(-1)})}).catch(e=>{}):this.$toast.fail("请填写正确的手机号")}}},c=n,d=(a("1783"),a("2877")),r=Object(d["a"])(c,s,i,!1,null,"414ffaf4",null);t["default"]=r.exports}}]);