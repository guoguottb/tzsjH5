(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e83169a"],{"40c7":function(a,e,t){"use strict";t.r(e);var i=function(){var a=this,e=a._self._c;return e("div",[e("header",[e("div",[e("i",{staticClass:"el-icon-arrow-left",staticStyle:{float:"left",margin:"10px","z-index":"1000"},on:{click:a.goBack}}),a._v(" 我要救助认领 ")])]),e("div",{staticClass:"body"},[e("el-form",{ref:"claimData",staticClass:"demo-ruleForm",attrs:{model:a.claimData,rules:a.rules,"inline-message":!0,"show-message":!1,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"认领类型",prop:"abc_ex11"}},[e("el-select",{staticStyle:{width:"200px",border:"0"},attrs:{placeholder:"请选择"},model:{value:a.claimData.abc_ex11,callback:function(e){a.$set(a.claimData,"abc_ex11",e)},expression:"claimData.abc_ex11"}},[e("el-option",{attrs:{label:"请选择",value:""}}),e("el-option",{attrs:{label:"个人",value:"个人"}}),e("el-option",{attrs:{label:"团体",value:"团体"}})],1)],1),e("el-form-item",{attrs:{label:"认领名称",prop:"abc_ex12"}},[e("el-input",{attrs:{placeholder:"请输入认领名称"},model:{value:a.claimData.abc_ex12,callback:function(e){a.$set(a.claimData,"abc_ex12",e)},expression:"claimData.abc_ex12"}})],1),e("el-form-item",{attrs:{label:"证件号码",prop:"abc_ex13"}},[e("el-input",{attrs:{placeholder:"请输入证件号码"},model:{value:a.claimData.abc_ex13,callback:function(e){a.$set(a.claimData,"abc_ex13",e)},expression:"claimData.abc_ex13"}})],1),e("el-form-item",{attrs:{label:"认领住址",prop:"abc_ex14"}},[e("el-input",{attrs:{placeholder:"请输入认领住址"},model:{value:a.claimData.abc_ex14,callback:function(e){a.$set(a.claimData,"abc_ex14",e)},expression:"claimData.abc_ex14"}})],1),e("el-form-item",{attrs:{label:"认领说明",prop:"abc_ex15"}},[e("el-input",{staticClass:"claimSay",attrs:{type:"textarea",placeholder:"请输入认领说明"},model:{value:a.claimData.abc_ex15,callback:function(e){a.$set(a.claimData,"abc_ex15",e)},expression:"claimData.abc_ex15"}})],1),e("el-form-item",{attrs:{label:"联系电话",prop:"abc_ex16"}},[e("el-input",{staticClass:"phoneNum",attrs:{placeholder:"请输入联系电话"},model:{value:a.claimData.abc_ex16,callback:function(e){a.$set(a.claimData,"abc_ex16",e)},expression:"claimData.abc_ex16"}}),e("el-button",{attrs:{disabled:a.hqyzmDis},on:{click:a.hqyzm}},[a._v(a._s(a.hqyzmtext))])],1),e("el-form-item",{attrs:{label:"验证码",prop:"yanzm"}},[e("el-input",{attrs:{placeholder:"请输入验证码",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:a.claimData.yanzm,callback:function(e){a.$set(a.claimData,"yanzm",e)},expression:"claimData.yanzm"}})],1)],1)],1),e("footer",[e("el-button",{staticStyle:{width:"90%",position:"fixed",bottom:"10px",left:"5%",right:"5%","font-size":"16px"},attrs:{size:"small",round:"",type:"primary"},on:{click:function(e){return a.submit("/projectReleased")}}},[a._v("确定")])],1)])},s=[],l=t("b775"),c=t("fa7d"),r={data(){return{hqyzmDis:!1,hqyzmtext:"获取验证码",yzm:"",m:60,claimData:{yanzm:"",abc_id:"",abc_ex10:"",abc_ex11:"",abc_ex12:"",abc_ex13:"",abc_ex14:"",abc_ex15:"",abc_ex16:""},rules:{abc_ex11:[{required:!0,message:"认领类型不能为空",trigger:"blur"}],abc_ex12:[{required:!0,message:"认领名称不能为空",trigger:"blur"}],abc_ex13:[{required:!0,message:"证件号码不能为空",trigger:"blur"}],abc_ex14:[{required:!0,message:"认领住址不能为空",trigger:"blur"}],abc_ex15:[{required:!0,message:"认领说明不能为空",trigger:"blur"}],abc_ex16:[{required:!0,message:"联系电话不能为空",trigger:"blur"}]}}},methods:{goBack(){setTimeout(()=>{this.$router.back(-1)},200)},hqyzm(){this.$refs["claimData"].validate(a=>{if(!a)return!1});let a=this.validate();if(a)return this.$message.warning(a),!1;if(this.claimData.abc_ex13){let a=Object(c["e"])(this.claimData.abc_ex13);if(a)return this.$message.warning(a),!1}var e=/^[1][3,4,5,7,8,9][0-9]{9}$/;if(!e.test(this.claimData.abc_ex16))return this.$message.warning("请填写正确的联系电话"),!1;console.log("-----------------"),Object(l["a"])({method:"get",url:"/social/assistanceWeixin/backTelCheck",params:{tel:this.claimData.abc_ex16}}).then(a=>{"+OK"==a[0].status?(this.$message.success(a[0].msg),this.yzm=a[0].Vcode):this.$message.warning(a[0].msg)}).catch(a=>{this.$message.warning("验证码发送失败"),console.log(a)}),console.log("-----------------"),this.hqyzmtext=this.m+"s",this.hqyzmDis=!0;let t=setInterval(()=>{this.m--,this.hqyzmtext=this.m+"s",0==this.m&&(this.hqyzmtext="获取验证码",this.m=60,this.hqyzmDis=!1,clearInterval(t))},1e3)},submit(a){this.$refs["claimData"].validate(a=>{if(!a)return!1});let e=this.validate();if(e)return this.$message.warning(e),!1;var t=/^[1][3,4,5,7,8,9][0-9]{9}$/;if(!t.test(this.claimData.abc_ex16))return this.$message.warning("请填写正确的联系电话"),!1;if(this.claimData.abc_ex13){let a=Object(c["e"])(this.claimData.abc_ex13);if(a)return this.$message.warning(a),!1}return""==this.claimData.yanzm?(this.$message.warning("验证码不能为空"),!1):this.claimData.yanzm!=this.yzm?(this.$message.warning("验证码错误"),!1):(this.claimData.abc_id=this.$route.query.id,console.log(this.$route.query.id),console.log(JSON.stringify(this.claimData)),this.$notify({message:"认领成功",type:"success"}),this.saveClaim({}).then(a=>{console.log(this),console.log(a,"res")}).catch(a=>{console.log("catch",a)}),void setTimeout(()=>{this.$router.push({path:a})},1e3))},validate(){try{let e="";for(let t in this.rules)try{let a=this.rules[t],i=this.claimData[t];if(""==i){e=a[0].message;break}}catch(a){}return e}catch(a){return""}},saveClaim(a){return console.log(a,"data"),Object(l["a"])({method:"post",url:"/social/assistanceWeixin/saveBasicCharityRL",data:{data:"["+JSON.stringify(this.claimData)+"]"}})}}},m=r,o=(t("5cf9"),t("2877")),n=Object(o["a"])(m,i,s,!1,null,"f99a0aee",null);e["default"]=n.exports},"5cf9":function(a,e,t){"use strict";t("eb64")},eb64:function(a,e,t){}}]);